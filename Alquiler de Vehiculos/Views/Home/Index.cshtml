@{
    ViewData["Title"] = "Home Page";
}

@section Styles {
    <link rel="stylesheet" href="~/css/home.css" />
}

<!--Carrusel-->
<div class="carousel-container">
    <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://cdn.pixabay.com/photo/2020/02/03/10/02/sports-car-4815234_1280.jpg" class="d-block w-100" alt="...">
                <div class="carousel-caption">
                    <h1>Alquiler de Vehículos</h1>
                    <p>La mejor selección de autos para tu comodidad</p>
                    <a class="btn btn-primary btn-lg"
                       asp-controller="Reservas"
                       asp-action="Index">
                        <i class="fas fa-car-side me-2"></i>
                        Reserva ya!
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://images.pexels.com/photos/164634/pexels-photo-164634.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                <div class="carousel-caption">
                    <h1>Alquiler de Vehículos</h1>
                    <p>La mejor selección de autos para tu comodidad</p>
                    <a class="btn btn-primary btn-lg"
                       asp-controller="Reservas"
                       asp-action="Index">
                        <i class="fas fa-car-side me-2"></i>
                        Reserva ya!
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://images.pexels.com/photos/116675/pexels-photo-116675.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                <div class="carousel-caption">
                    <h1>Alquiler de Vehículos</h1>
                    <p>La mejor selección de autos para tu comodidad</p>
                    <a class="btn btn-primary btn-lg"
                       asp-controller="Reservas"
                       asp-action="Index">
                        <i class="fas fa-car-side me-2"></i>
                        Reserva ya!
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://images.pexels.com/photos/20345033/pexels-photo-20345033/free-photo-of-ciudad-puesta-de-sol-calle-edificios.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                <div class="carousel-caption">
                    <h1>Alquiler de Vehículos</h1>
                    <p>La mejor selección de autos para tu comodidad</p>
                    <a class="btn btn-primary btn-lg"
                       asp-controller="Reservas"
                       asp-action="Index">
                        <i class="fas fa-car-side me-2"></i>
                        Reserva ya!
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://images.pexels.com/photos/120049/pexels-photo-120049.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                <div class="carousel-caption">
                    <h1>Alquiler de Vehículos</h1>
                    <p>La mejor selección de autos para tu comodidad</p>
                    <a class="btn btn-primary btn-lg"
                       asp-controller="Reservas"
                       asp-action="Index">
                        <i class="fas fa-car-side me-2"></i>
                        Reserva ya!
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Contenido-->
<div class="container py-5">
    <div class="row justify-content-center g-4">
        <div class="col-md-3">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Vehículos Disponibles</h5>
                    <p class="card-text">Explora nuestra flota de vehículos</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Reservas</h5>
                    <p class="card-text">Gestiona tus reservas</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Servicios</h5>
                    <p class="card-text">Conoce nuestros servicios</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <!--Modelo de las reservas-->
    <!--Primero el usuario deberia ya escoger su vehículo-->
    <!--Si ya escogio del catálogo de autos ya deberia seleccionarse
    Si no despliega las tabla de autos con las opción de escoger uno de ellos -->
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">First</th>
                <th scope="col">Last</th>
                <th scope="col">Handle</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row">1</th>
                <td>Mark</td>
                <td>Otto</td>
                <td>aado</td>
            </tr>
            <tr>
                <th scope="row">2</th>
                <td>Jacob</td>
                <td>Thornton</td>
                <td>aaafat</td>
            </tr>
            <tr>
                <th scope="row">3</th>
                <td colspan="2">Larry the Bird</td>
                <td>aatwitter</td>
            </tr>
        </tbody>
    </table>

    <!--Luego deberia escoger las fechas de inicio y fin-->
    <div class="container my-5">
        <div class="card shadow-lg border-0 rounded-lg">
            <div class="card-header bg-gradient text-white" style="background-color: #4e73df;">
                <h4 class="mb-0">
                    <i class="fas fa-calendar-check me-2"></i>
                    Selecciona las Fechas de tu Reserva
                </h4>
            </div>
            <div class="card-body p-4">
                <form id="fechasReservaForm">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="date"
                                       class="form-control form-control-lg"
                                       id="fechaInicio"
                                       name="fechaInicio"
                                       required
                                       min="@DateTime.Now.ToString("yyyy-MM-dd")"
                                       placeholder="Fecha de Inicio">
                                <label for="fechaInicio">
                                    <i class="fas fa-calendar-alt text-primary me-2"></i>
                                    Fecha de Inicio
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="date"
                                       class="form-control form-control-lg"
                                       id="fechaFin"
                                       name="fechaFin"
                                       required
                                       min="@DateTime.Now.AddDays(1).ToString("yyyy-MM-dd")"
                                       placeholder="Fecha de Devolución">
                                <label for="fechaFin">
                                    <i class="fas fa-calendar-check text-primary me-2"></i>
                                    Fecha de Devolución
                                </label>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex justify-content-between align-items-center mt-4">
                                <span class="text-muted">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Selecciona las fechas para calcular el precio total
                                </span>
                                <button type="submit" class="btn btn-primary btn-lg px-5">
                                    <i class="fas fa-check-circle me-2"></i>
                                    Confirmar Reserva
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="container my-5">
    <div class="card shadow-lg border-0 rounded-lg">
        <div class="card-header bg-gradient text-white" style="background-color: #4e73df;">
            <h4 class="mb-0">
                <i class="fas fa-credit-card me-2"></i>
                Método de Pago
            </h4>
        </div>
        <div class="card-body p-4">
            <form class="row g-3 needs-validation" novalidate>
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="nombreTarjeta" required
                               placeholder="Nombre en la tarjeta">
                        <label for="nombreTarjeta">
                            <i class="fas fa-user me-2"></i>
                            Nombre en la tarjeta
                        </label>
                        <div class="invalid-feedback">
                            Por favor ingrese el nombre que aparece en la tarjeta.
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="numeroTarjeta" required
                               pattern="[0-9]{16}" placeholder="Número de tarjeta">
                        <label for="numeroTarjeta">
                            <i class="fas fa-credit-card me-2"></i>
                            Número de tarjeta
                        </label>
                        <div class="invalid-feedback">
                            Por favor ingrese un número de tarjeta válido (16 dígitos).
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="fechaExpiracion" required
                               pattern="(0[1-9]|1[0-2])\/([0-9]{2})" placeholder="MM/YY">
                        <label for="fechaExpiracion">
                            <i class="fas fa-calendar-alt me-2"></i>
                            Fecha de expiración (MM/YY)
                        </label>
                        <div class="invalid-feedback">
                            Por favor ingrese una fecha válida (MM/YY).
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="cvv" required
                               pattern="[0-9]{3,4}" placeholder="CVV">
                        <label for="cvv">
                            <i class="fas fa-lock me-2"></i>
                            CVV
                        </label>
                        <div class="invalid-feedback">
                            Por favor ingrese un CVV válido.
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-floating mb-3">
                        <select class="form-select" id="tipoTarjeta" required>
                            <option value="" disabled selected>Seleccione...</option>
                            <option value="visa">Visa</option>
                            <option value="mastercard">Mastercard</option>
                            <option value="amex">American Express</option>
                        </select>
                        <label for="tipoTarjeta">
                            <i class="fas fa-credit-card me-2"></i>
                            Tipo de tarjeta
                        </label>
                        <div class="invalid-feedback">
                            Por favor seleccione un tipo de tarjeta.
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="terminos" required>
                        <label class="form-check-label" for="terminos">
                            Acepto los términos y condiciones del servicio
                        </label>
                        <div class="invalid-feedback">
                            Debe aceptar los términos y condiciones para continuar.
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <button class="btn btn-primary btn-lg w-100" type="submit">
                        <i class="fas fa-lock me-2"></i>
                        Confirmar Pago
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fechaInicio = document.getElementById('fechaInicio');
            const fechaFin = document.getElementById('fechaFin');

            fechaInicio.addEventListener('change', function() {
                const fechaInicioValue = new Date(this.value);
                const fechaMinFin = new Date(fechaInicioValue);
                fechaMinFin.setDate(fechaInicioValue.getDate() + 1);
                fechaFin.min = fechaMinFin.toISOString().split('T')[0];
                
                if (new Date(fechaFin.value) <= fechaInicioValue) {
                    fechaFin.value = fechaMinFin.toISOString().split('T')[0];
                }
            });
        });
    </script>
    <script>
        // Validación del formulario
        (function () {
            'use strict'
            var forms = document.querySelectorAll('.needs-validation')
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }
                        form.classList.add('was-validated')
                    }, false)
                })
        })()
    </script>
}